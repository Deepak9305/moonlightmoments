<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moonlight Moments | Daily Celestial Gallery</title>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>✨</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Playfair+Display:ital,wght@0,700;1,700&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-color: #050505;
            --text-color: #E0E0E0;
            --accent: #72a4f2;
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { background-color: var(--bg-color); color: var(--text-color); font-family: 'Inter', sans-serif; overflow-x: hidden; line-height: 1.6; }

        /* --- Fail-Safe Cursor --- */
        #cursor-ring { 
            width: 24px; height: 24px; border: 2px solid #fff; border-radius: 50%; 
            position: fixed; pointer-events: none; z-index: 100000; mix-blend-mode: difference; 
            display: none; top: 0; left: 0; will-change: transform;
        }
        .no-mouse { cursor: none !important; }
        .no-mouse a, .no-mouse button, .no-mouse .grid-item-card { cursor: none !important; }

        /* --- Preloader --- */
        #preloader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #050505; z-index: 99999; display: flex; flex-direction: column;
            align-items: center; justify-content: center; transition: opacity 0.8s ease;
        }
        .loader-spin {
            width: 50px; height: 50px; border: 3px solid rgba(114, 164, 242, 0.1);
            border-top: 3px solid var(--accent); border-radius: 50%; animation: spin 1s linear infinite;
        }

        /* --- Nav --- */
        .glass-nav { position: fixed; top: 0; width: 100%; display: flex; justify-content: space-between; align-items: center; padding: 1.2rem 5%; background: rgba(5, 5, 5, 0.85); backdrop-filter: blur(25px); border-bottom: 1px solid var(--glass-border); z-index: 1000; }
        .logo { font-family: 'Playfair Display'; font-size: 1.4rem; font-weight: 700; text-decoration: none; color: white; }
        .nav-right { display: flex; gap: 15px; align-items: center; }
        .support-btn { color: var(--accent); text-decoration: none; font-size: 0.85rem; border: 1px solid var(--accent); padding: 8px 18px; border-radius: 20px; transition: 0.3s; white-space: nowrap; }
        
        .hamburger-btn { background: var(--glass); border: 1px solid var(--glass-border); width: 40px; height: 40px; border-radius: 50%; display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 4px; transition: 0.3s; }
        .hamburger-btn span { display: block; width: 18px; height: 2px; background: white; transition: 0.3s; }

        .dropdown { position: relative; }
        .dropdown-content { display: none; position: absolute; right: 0; top: 50px; background: #0f0f0f; min-width: 180px; border: 1px solid var(--glass-border); border-radius: 12px; z-index: 1001; }
        .dropdown-content.show { display: block; }
        .dropdown-content a { color: #ccc; padding: 14px 20px; text-decoration: none; display: block; font-size: 0.85rem; }
        .dropdown-content a:hover { background: var(--accent); color: white; }

        /* --- Hero --- */
        .hero-section { min-height: 100vh; display: flex; align-items: center; justify-content: center; position: relative; text-align: center; overflow: hidden; padding: 140px 20px 40px; }
        #hero-bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0.6; }
        #hero-bg img { width: 100%; height: 100%; object-fit: cover; }
        
        .input-group { background: var(--glass); border: 1px solid var(--glass-border); padding: 5px; border-radius: 30px; display: flex; width: 100%; max-width: 500px; margin: 10px auto; }
        .input-group input { background: none; border: none; padding: 10px 20px; color: white; flex: 1; outline: none; font-size: 1rem; }
        .btn-action { background: var(--accent); color: white; border: none; padding: 10px 25px; border-radius: 25px; font-weight: 600; cursor: pointer; transition: 0.3s; }

        /* --- Gallery --- */
        .gallery-section { padding: 80px 8%; scroll-margin-top: 80px; }
        .grid-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }
        .grid-item-card { background: var(--glass); border: 1px solid var(--glass-border); border-radius: 12px; overflow: hidden; opacity: 0; transform: translateY(20px); transition: 0.3s; cursor: pointer; }
        .card-img-wrapper { aspect-ratio: 16/10; background: #111; overflow: hidden; }
        .card-img-wrapper img { width: 100%; height: 100%; object-fit: cover; opacity: 0; transition: 0.8s; }

        /* --- Modals --- */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); backdrop-filter: blur(15px); display: none; z-index: 2000; justify-content: center; align-items: center; padding: 20px; }
        .modal-content { background: #0a0a0a; width: 100%; max-width: 1000px; display: flex; border: 1px solid var(--glass-border); position: relative; max-height: 90vh; overflow: hidden; }
        .modal-img-side { flex: 1.3; background: #000; cursor: zoom-in; }
        .modal-img-side img { width: 100%; height: 100%; object-fit: contain; }
        .modal-text-side { flex: 1; padding: 40px; display: flex; flex-direction: column; overflow-y: auto; }

        .legal-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #050505; z-index: 3000; display: none; overflow-y: auto; padding: 60px 20px; }
        .legal-inner { max-width: 800px; margin: 0 auto; line-height: 1.8; }
        .legal-header { font-family: 'Playfair Display'; font-size: 3rem; margin-bottom: 20px; color: var(--accent); }

        .lightbox { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 5000; display: none; justify-content: center; align-items: center; cursor: zoom-out; }
        .lightbox img { max-width: 100%; max-height: 100%; }

        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }

        @media (max-width: 768px) {
            .nav-right { flex-direction: column !important; align-items: flex-end !important; gap: 8px !important; }
            .support-btn { padding: 4px 12px; font-size: 0.7rem; }
            .modal-content { flex-direction: column; overflow-y: auto; }
            .modal-img-side { height: 250px; flex: none; }
        }
    </style>
</head>
<body>

    <div id="preloader">
        <div class="loader-spin"></div>
        <p style="margin-top: 15px; letter-spacing: 2px; font-size: 0.7rem; color: #555;">CALIBRATING VIEWPORT</p>
    </div>

    <div id="cursor-ring"></div>

    <nav class="glass-nav">
        <a href="#" class="logo">moonlightmoments.co.in</a>
        <div class="nav-right">
            <a href="#support-section" class="support-btn">Support</a>
            <div class="dropdown">
                <button class="hamburger-btn" id="menuBtn"><span></span><span></span><span></span></button>
                <div class="dropdown-content" id="myDropdown">
                    <a href="javascript:void(0)" onclick="showLegal('about')">Our Story</a>
                    <a href="javascript:void(0)" onclick="showLegal('privacy')">Privacy Orbit</a>
                    <a href="javascript:void(0)" onclick="showLegal('terms')">Guidelines</a>
                    <a href="javascript:void(0)" onclick="showLegal('contact')">Transmission</a>
                </div>
            </div>
        </div>
    </nav>

    <header class="hero-section">
        <div id="hero-bg"></div>
        <div class="hero-content">
            <h1 style="font-family: 'Playfair Display'; font-size: clamp(2rem, 8vw, 4.5rem); margin-bottom: 30px;">Moonlight Moments</h1>
            
            <div class="input-group">
                <input type="text" id="search-input" placeholder="Search the nebula...">
                <button class="btn-action" id="search-btn">Explore</button>
            </div>
            
            <div class="input-group" style="max-width: 350px;">
                <input type="date" id="date-input" min="1995-06-16">
                <button class="btn-action" id="date-btn">Birth Star</button>
            </div>
        </div>
    </header>

    <section class="gallery-section" id="gallery">
        <div class="grid-container" id="main-grid"></div>
    </section>

    <footer id="support-section" style="padding: 60px 5%; text-align: center;">
        <div style="margin: 0 auto 40px; padding: 40px; border: 1px solid var(--accent); border-radius: 24px; max-width: 800px;">
            <h3 style="font-family: 'Playfair Display'; font-size: 1.8rem; margin-bottom: 15px;">Ad-Free Sanctuary</h3>
            <script type='text/javascript' src='https://storage.ko-fi.com/cdn/widget/Widget_2.js'></script>
            <script type='text/javascript'>kofiwidget2.init('Support the Mission', '#72a4f2', 'H2H71RHHAJ'); kofiwidget2.draw();</script>
        </div>
        <p style="color: #444; font-size: 0.7rem;">&copy; 2026 Moonlight Moments | NASA Open API</p>
    </footer>

    <div id="modal" class="modal-overlay">
        <div class="modal-content">
            <button style="position:absolute; top:15px; right:20px; color:white; font-size:2rem; background:none; border:none; z-index:10;" onclick="closeModal()">&times;</button>
            <div class="modal-img-side" onclick="openLightbox()"><img id="m-img" src=""></div>
            <div class="modal-text-side">
                <h2 id="m-title" style="font-family:'Playfair Display'; margin-bottom:15px;"></h2>
                <p id="m-desc" style="color:#aaa; font-size:0.9rem; margin-bottom:20px;"></p>
                <button id="m-dl" style="width:100%; padding:15px; background:white; color:black; border:none; font-weight:700;">DOWNLOAD IMAGE</button>
            </div>
        </div>
    </div>

    <div id="legal-modal" class="legal-modal">
        <span style="position:fixed; top:30px; right:30px; font-size:2.5rem; color:#fff; cursor:pointer;" onclick="closeLegal()">&times;</span>
        <div class="legal-inner" id="legal-content"></div>
    </div>

    <div id="lightbox" class="lightbox" onclick="closeLightbox()"><img id="l-img" src=""></div>

    <script>
        const API_KEY = 'hKmFC3fvOigiVn60dpwIfQdIvQs4DeONZCWeDfLR';
        let galleryItems = [];

        // --- Fail-Safe Cursor Engine ---
        const cursor = document.getElementById('cursor-ring');
        let mouseX = 0, mouseY = 0, ringX = 0, ringY = 0;

        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX; mouseY = e.clientY;
            if (window.matchMedia("(pointer: fine)").matches) {
                cursor.style.display = 'block';
                document.body.classList.add('no-mouse');
            }
        });

        function animateCursor() {
            ringX += (mouseX - ringX) * 0.15;
            ringY += (mouseY - ringY) * 0.15;
            cursor.style.transform = `translate3d(${ringX - 12}px, ${ringY - 12}px, 0)`;
            requestAnimationFrame(animateCursor);
        }
        animateCursor();

        // --- NASA Logic ---
        async function fetchNasa(url) {
            const res = await fetch(`${url}&api_key=${API_KEY}`);
            return await res.json();
        }

        async function loadInitial() {
            const data = await fetchNasa(`https://api.nasa.gov/planetary/apod?count=12`);
            galleryItems = data;
            document.getElementById('hero-bg').innerHTML = `<img src="${data[0].url}">`;
            renderGrid();
            // Hide Preloader
            const loader = document.getElementById('preloader');
            loader.style.opacity = '0';
            setTimeout(() => loader.remove(), 800);
        }

        function renderGrid() {
            document.getElementById('main-grid').innerHTML = galleryItems.map((item, i) => `
                <div class="grid-item-card" onclick="openModal(${i})" style="animation: fadeInUp 0.6s forwards ${i * 0.1}s;">
                    <div class="card-img-wrapper"><img src="${item.url}" onload="this.style.opacity='1'"></div>
                    <div style="padding:20px;"><h3 style="font-size:1rem;">${item.title}</h3></div>
                </div>`).join('');
        }

        // --- Search Features ---
        document.getElementById('search-btn').onclick = async () => {
            const q = document.getElementById('search-input').value; if(!q) return;
            const data = await (await fetch(`https://images-api.nasa.gov/search?q=${q}&media_type=image`)).json();
            galleryItems = data.collection.items.slice(0, 12).map(i => ({
                url: i.links[0].href, title: i.data[0].title, explanation: i.data[0].description
            }));
            renderGrid();
            document.getElementById('gallery').scrollIntoView();
        };

        document.getElementById('date-btn').onclick = async () => {
            const d = document.getElementById('date-input').value; if(!d) return;
            const item = await fetchNasa(`https://api.nasa.gov/planetary/apod?date=${d}`);
            galleryItems.unshift(item); renderGrid(); openModal(0);
        };

        // --- Navigation ---
        document.getElementById('menuBtn').onclick = (e) => {
            e.stopPropagation();
            document.getElementById('myDropdown').classList.toggle('show');
        };
        window.onclick = () => document.getElementById('myDropdown').classList.remove('show');

        // --- Modals ---
        function openModal(i) {
            const item = galleryItems[i];
            document.getElementById('m-img').src = item.url;
            document.getElementById('l-img').src = item.hdurl || item.url;
            document.getElementById('m-title').innerText = item.title;
            document.getElementById('m-desc').innerText = item.explanation;
            document.getElementById('modal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
            document.getElementById('m-dl').onclick = () => window.open(item.url, '_blank');
        }
        function closeModal() { document.getElementById('modal').style.display='none'; document.body.style.overflow='auto'; }
        function openLightbox() { document.getElementById('lightbox').style.display='flex'; }
        function closeLightbox() { document.getElementById('lightbox').style.display='none'; }

        // --- Legal Logic ---
        const legalData = {
            about: { title: "Our Story", content: "<p>Moonlight Moments began with a simple realization: in an era of constant noise, the quiet majesty of the stars is often forgotten. We are a digital observatory designed to reconnect the modern world with the ancient wonder of the cosmos.</p><br><p>Every day, we curate a high-definition window into the universe, powered by NASA’s deep-space imaging.</p>" },
            privacy: { title: "Privacy Orbit", content: "<p>At Moonlight Moments, we believe your digital footprint should be as silent as space. We do not use intrusive tracking cookies, we do not sell your data, and we do not profile our visitors.</p>" },
            terms: { title: "Guidelines", content: "<p>By exploring Moonlight Moments, you enter a shared space of scientific wonder. The imagery provided is sourced via NASA's Open API and is subject to their public domain policies.</p>" },
            contact: { title: "Transmission", content: "<p>Support Email: support@moonlightmoments.co.in</p><br><p>Response Time: We aim to respond within 48 Earth hours.</p>" }
        };

        function showLegal(t) {
            const d = legalData[t];
            document.getElementById('legal-content').innerHTML = `<h2 class="legal-header">${d.title}</h2><div style="color:#ccc;">${d.content}</div>`;
            document.getElementById('legal-modal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }
        function closeLegal() { document.getElementById('legal-modal').style.display='none'; document.body.style.overflow='auto'; }

        loadInitial();
    </script>
</body>
</html>
